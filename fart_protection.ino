// Сенсор MQ-2 является элементом датчика газа MQ-2. Датчик газа MQ-2 позволяет обнаружить в воздухе частицы дыма и углеводородные газы. 
// Во время работы датчика, сенсор MQ-2 будет нагреваться, так как в него встроен нагревательный элемент, который необходим для химической реакции. 
// На выходе получаем аналоговый сигнал, который пропорционален содержанию газов, к которым он чувствителен. Диапазон измерений:
// Пропан: 0,2 – 5 промилле
// Бутан: 0,3 – 5 промилле
// Метан: 5 – 20 промилле
// Водород: 0,3 – 5 промилле
// Пары спиртов: 0,1 – 2 промилле

// Определяем пин, к которому подключен датчик MQ-2.
// Датчик MQ-2 выдает аналоговый сигнал, который пропорционален концентрации газа.
// Аналоговые пины (A0-A5 на Arduino UNO) используются для считывания аналоговых сигналов.
// A0 — это первый аналоговый пин, и его использование здесь является произвольным выбором.

const int sensorPin = A0;

// Определяем пин, к которому подключен LED (для индикации обнаружения газа)
// Пин 13 часто используется для подключения LED, так как на плате Arduino UNO есть встроенный LED, подключенный к этому пину

const int ledPin = 13;

// Переменная для хранения значения, считанного с датчика
int sensorValue;

// Порог обнаружения газа (настраивать тут)
int threshold = 100000;

// Эта функция инициализирует последовательный порт для связи с компьютером.
void setup() {
  // Инициализируем последовательный порт с скоростью 9600 бод. Скорость 9600 бод — это стандартная скорость передачи данных, которая используется в большинстве Arduino-проектов.
  // Последовательный порт позволяет выводить отладочную информацию и данные с датчиков в монитор последовательного порта (Serial Monitor) в Arduino IDE
  Serial.begin(9600);

  // Устанавливаем пин LED как выход
  pinMode(ledPin, OUTPUT);
}

void loop() {
  // Читаем аналоговое значение с датчика MQ-2
  // analogRead возвращает значение от 0 до 1023
  sensorValue = analogRead(sensorPin);

  // Выводим значение датчика в последовательный монитор
  // Это помогает отладить и настроить порог обнаружения газа
  Serial.print("Sensor Value: ");
  Serial.println(sensorValue);

  // Проверяем, превышает ли значение датчика установленный порог
  if (sensorValue > threshold) {
    // Если значение превышает порог, включаем LED
    digitalWrite(ledPin, HIGH);

    // Выводим сообщение в последовательный монитор
    Serial.println("Gas detected!");
  } else {
    // Если значение ниже порога, выключаем LED
    digitalWrite(ledPin, LOW);
  }

  // Небольшая задержка перед следующим измерением
  // Это позволяет избежать частых считываний и уменьшить нагрузку на процессор
  delay(1000);
}
